{"ast":null,"code":"var _jsxFileName = \"D:\\\\untitled\\\\src\\\\component\\\\GetItem.js\";\nimport React, { Component } from \"react\";\nimport PubSub from \"pubsub-js\";\nimport Axios from \"axios\";\nimport qs from 'qs';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class GetItem extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      results: [],\n      arr: []\n    };\n\n    this.postitem = () => {\n      const data = {\n        q: 'owner:\"admin\" orgid:0123456789ABCDEF  ownerfolder:root -type:(\"Code Attachment\" OR \"Featured Items\") -typekeywords:(\"MapAreaPackage\") -type:(\"Map Area\")',\n        num: 20,\n        start: 1,\n        sortField: \"modified\",\n        sortOrder: \"desc\",\n        f: \"json\",\n        token: this.state.tokenmanager\n      };\n      const params = qs.stringify(data);\n      Axios.post('https://p15v.arcgisonline.cn/portal/sharing/rest/search', params)\n      /*将获取到的数据提出，存储到state里*/\n      .then(res => {\n        const {\n          results\n        } = res.data;\n        this.setState({\n          results\n        });\n        const arr = [];\n        this.state.results.map(obj => {\n          const {\n            id\n          } = obj;\n          return arr.push({\n            id\n          });\n        });\n        this.setState({\n          arr\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    PubSub.subscribe('token', (msg, tokenmanager) => this.setState(tokenmanager)); //订阅Getinfo发布的token\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.postitem,\n        children: \"\\u83B7\\u53D6\\u9879\\u76EE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children:\n        /*利用.map遍历数组内的值*/\n        this.state.results.map(resultsobj => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: resultsobj.thumbnail\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 64,\n                columnNumber: 39\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 36\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: resultsobj.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 37\n            }, this)]\n          }, resultsobj.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/untitled/src/component/GetItem.js"],"names":["React","Component","PubSub","Axios","qs","GetItem","state","results","arr","postitem","data","q","num","start","sortField","sortOrder","f","token","tokenmanager","params","stringify","post","then","res","setState","map","obj","id","push","componentDidMount","subscribe","msg","render","resultsobj","thumbnail","title"],"mappings":";AAAA,OAAOA,KAAP,IAAcC,SAAd,QAA6B,OAA7B;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,IAAf;;AAEA,eAAe,MAAMC,OAAN,SAAsBJ,SAAtB,CAA+B;AAAA;AAAA;AAAA,SAC3CK,KAD2C,GACrC;AACFC,MAAAA,OAAO,EAAC,EADN;AAEFC,MAAAA,GAAG,EAAC;AAFF,KADqC;;AAAA,SAU9CC,QAV8C,GAUrC,MAAK;AAEV,YAAMC,IAAI,GAAG;AACTC,QAAAA,CAAC,EAAE,0JADM;AAETC,QAAAA,GAAG,EAAE,EAFI;AAGTC,QAAAA,KAAK,EAAE,CAHE;AAITC,QAAAA,SAAS,EAAE,UAJF;AAKTC,QAAAA,SAAS,EAAE,MALF;AAMTC,QAAAA,CAAC,EAAE,MANM;AAOTC,QAAAA,KAAK,EAAE,KAAKX,KAAL,CAAWY;AAPT,OAAb;AASA,YAAMC,MAAM,GAAGf,EAAE,CAACgB,SAAH,CAAaV,IAAb,CAAf;AACAP,MAAAA,KAAK,CAACkB,IAAN,CAAW,yDAAX,EAAsEF,MAAtE;AACI;AADJ,OAEKG,IAFL,CAGSC,GAAD,IAAS;AACT,cAAM;AAAChB,UAAAA;AAAD,YAAYgB,GAAG,CAACb,IAAtB;AACA,aAAKc,QAAL,CAAc;AAACjB,UAAAA;AAAD,SAAd;AACI,cAAMC,GAAG,GAAC,EAAV;AACA,aAAKF,KAAL,CAAWC,OAAX,CAAmBkB,GAAnB,CAAuBC,GAAG,IAC1B;AAEI,gBAAM;AAACC,YAAAA;AAAD,cAAKD,GAAX;AACA,iBACAlB,GAAG,CAACoB,IAAJ,CAAS;AAACD,YAAAA;AAAD,WAAT,CADA;AAGH,SAPD;AAQF,aAAKH,QAAL,CAAc;AAAChB,UAAAA;AAAD,SAAd;AACL,OAhBL;AAwBH,KA9C6C;AAAA;;AAM1CqB,EAAAA,iBAAiB,GAAG;AAChB3B,IAAAA,MAAM,CAAC4B,SAAP,CAAiB,OAAjB,EAAyB,CAACC,GAAD,EAAKb,YAAL,KAAqB,KAAKM,QAAL,CAAcN,YAAd,CAA9C,EADgB,CAC0D;AAC7E;;AAwCDc,EAAAA,MAAM,GAAG;AACL,wBACI;AAAA,8BACI;AAAQ,QAAA,OAAO,EAAE,KAAKvB,QAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAA;AAEQ;AACA,aAAKH,KAAL,CAAWC,OAAX,CAAmBkB,GAAnB,CAAwBQ,UAAD,IAAc;AACjC,8BACI;AAAA,oCACG;AAAA,qCAAG;AAAK,gBAAA,GAAG,EAAEA,UAAU,CAACC;AAArB;AAAA;AAAA;AAAA;AAAA;AAAH;AAAA;AAAA;AAAA;AAAA,oBADH,eAEI;AAAA,wBAAID,UAAU,CAACE;AAAf;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA,aAAUF,UAAU,CAACN,EAArB;AAAA;AAAA;AAAA;AAAA,kBADJ;AAMH,SAPD;AAHR;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAmBH;;AApEyC","sourcesContent":["import React,{Component}from \"react\"\r\nimport PubSub from \"pubsub-js\";\r\nimport Axios from \"axios\";\r\nimport qs from 'qs'\r\n\r\nexport default class GetItem extends Component{\r\n   state={\r\n       results:[],\r\n       arr:[],\r\n\r\n   }\r\n    componentDidMount() {\r\n        PubSub.subscribe('token',(msg,tokenmanager)=> this.setState(tokenmanager))//订阅Getinfo发布的token\r\n    }\r\n\r\npostitem=()=> {\r\n\r\n    const data = {\r\n        q: 'owner:\"admin\" orgid:0123456789ABCDEF  ownerfolder:root -type:(\"Code Attachment\" OR \"Featured Items\") -typekeywords:(\"MapAreaPackage\") -type:(\"Map Area\")',\r\n        num: 20,\r\n        start: 1,\r\n        sortField: \"modified\",\r\n        sortOrder: \"desc\",\r\n        f: \"json\",\r\n        token: this.state.tokenmanager\r\n    }\r\n    const params = qs.stringify(data);\r\n    Axios.post('https://p15v.arcgisonline.cn/portal/sharing/rest/search', params)\r\n        /*将获取到的数据提出，存储到state里*/\r\n        .then(\r\n            (res) => {\r\n            const {results} = res.data\r\n            this.setState({results})\r\n                const arr=[]\r\n                this.state.results.map(obj=>\r\n                {\r\n\r\n                    const {id}=obj\r\n                    return(\r\n                    arr.push({id})\r\n                )\r\n                })\r\n              this.setState({arr})\r\n        }\r\n\r\n\r\n\r\n        )\r\n\r\n\r\n\r\n}\r\n\r\n    render (){\r\n        return(\r\n            <div>\r\n                <button onClick={this.postitem}>获取项目</button>\r\n                <div>\r\n                    {\r\n                        /*利用.map遍历数组内的值*/\r\n                        this.state.results.map((resultsobj)=>{\r\n                            return(\r\n                                <div key={resultsobj.id}>\r\n                                   <a><img src={resultsobj.thumbnail}/></a>\r\n                                    <p>{resultsobj.title}</p>\r\n                        </div>\r\n                            )\r\n                        })\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}