{"ast":null,"code":"var _jsxFileName = \"D:\\\\untitled\\\\src\\\\component\\\\GetItem.js\";\nimport React, { Component } from \"react\";\nimport PubSub from \"pubsub-js\";\nimport Axios from \"axios\";\nimport qs from 'qs';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class GetItem extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      results: [],\n      id: []\n    };\n\n    this.postitem = () => {\n      const data = {\n        q: 'owner:\"admin\" orgid:0123456789ABCDEF  ownerfolder:root -type:(\"Code Attachment\" OR \"Featured Items\") -typekeywords:(\"MapAreaPackage\") -type:(\"Map Area\")',\n        num: 20,\n        start: 1,\n        sortField: \"modified\",\n        sortOrder: \"desc\",\n        f: \"json\",\n        token: this.state.tokenmanager\n      };\n      const params = qs.stringify(data);\n      Axios.post('https://p15v.arcgisonline.cn/portal/sharing/rest/search', params).then(res => {\n        const {\n          results\n        } = res.data;\n        this.setState({\n          results\n        });\n        const {\n          id\n        } = this.state.results;\n        console.log({\n          id\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    PubSub.subscribe('token', (msg, tokenmanager) => this.setState(tokenmanager)); //订阅Getinfo发布的token\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.postitem,\n        children: \"\\u83B7\\u53D6\\u9879\\u76EE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children:\n        /*利用.map遍历数组内的值*/\n        this.state.results.map(resultsobj => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: resultsobj.thumbnail\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 49,\n                columnNumber: 39\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 36\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: resultsobj.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 37\n            }, this)]\n          }, resultsobj.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/untitled/src/component/GetItem.js"],"names":["React","Component","PubSub","Axios","qs","GetItem","state","results","id","postitem","data","q","num","start","sortField","sortOrder","f","token","tokenmanager","params","stringify","post","then","res","setState","console","log","componentDidMount","subscribe","msg","render","map","resultsobj","thumbnail","title"],"mappings":";AAAA,OAAOA,KAAP,IAAcC,SAAd,QAA6B,OAA7B;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,IAAf;;AAEA,eAAe,MAAMC,OAAN,SAAsBJ,SAAtB,CAA+B;AAAA;AAAA;AAAA,SAC3CK,KAD2C,GACrC;AACFC,MAAAA,OAAO,EAAC,EADN;AAEFC,MAAAA,EAAE,EAAC;AAFD,KADqC;;AAAA,SAS9CC,QAT8C,GASrC,MAAI;AAEb,YAAMC,IAAI,GAAC;AACPC,QAAAA,CAAC,EAAG,0JADG;AAEPC,QAAAA,GAAG,EAAE,EAFE;AAGPC,QAAAA,KAAK,EAAE,CAHA;AAIPC,QAAAA,SAAS,EAAE,UAJJ;AAKPC,QAAAA,SAAS,EAAE,MALJ;AAMPC,QAAAA,CAAC,EAAC,MANK;AAOPC,QAAAA,KAAK,EAAC,KAAKX,KAAL,CAAWY;AAPV,OAAX;AASI,YAAMC,MAAM,GAACf,EAAE,CAACgB,SAAH,CAAaV,IAAb,CAAb;AACAP,MAAAA,KAAK,CAACkB,IAAN,CAAW,yDAAX,EAAsEF,MAAtE,EACKG,IADL,CACWC,GAAD,IAAO;AACT,cAAM;AAAChB,UAAAA;AAAD,YAAUgB,GAAG,CAACb,IAApB;AACJ,aAAKc,QAAL,CAAc;AAACjB,UAAAA;AAAD,SAAd;AACI,cAAM;AAACC,UAAAA;AAAD,YAAK,KAAKF,KAAL,CAAWC,OAAtB;AACAkB,QAAAA,OAAO,CAACC,GAAR,CAAY;AAAClB,UAAAA;AAAD,SAAZ;AAGD,OARP;AAUH,KA/B6C;AAAA;;AAK1CmB,EAAAA,iBAAiB,GAAG;AAChBzB,IAAAA,MAAM,CAAC0B,SAAP,CAAiB,OAAjB,EAAyB,CAACC,GAAD,EAAKX,YAAL,KAAqB,KAAKM,QAAL,CAAcN,YAAd,CAA9C,EADgB,CAC0D;AAC7E;;AA0BDY,EAAAA,MAAM,GAAG;AACL,wBACI;AAAA,8BACI;AAAQ,QAAA,OAAO,EAAE,KAAKrB,QAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAA;AAEQ;AACA,aAAKH,KAAL,CAAWC,OAAX,CAAmBwB,GAAnB,CAAwBC,UAAD,IAAc;AACjC,8BACI;AAAA,oCACG;AAAA,qCAAG;AAAK,gBAAA,GAAG,EAAEA,UAAU,CAACC;AAArB;AAAA;AAAA;AAAA;AAAA;AAAH;AAAA;AAAA;AAAA;AAAA,oBADH,eAEI;AAAA,wBAAID,UAAU,CAACE;AAAf;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA,aAAUF,UAAU,CAACxB,EAArB;AAAA;AAAA;AAAA;AAAA,kBADJ;AAMH,SAPD;AAHR;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAmBH;;AArDyC","sourcesContent":["import React,{Component}from \"react\"\r\nimport PubSub from \"pubsub-js\";\r\nimport Axios from \"axios\";\r\nimport qs from 'qs'\r\n\r\nexport default class GetItem extends Component{\r\n   state={\r\n       results:[],\r\n       id:[]\r\n   }\r\n    componentDidMount() {\r\n        PubSub.subscribe('token',(msg,tokenmanager)=> this.setState(tokenmanager))//订阅Getinfo发布的token\r\n    }\r\n\r\npostitem=()=>{\r\n\r\nconst data={\r\n    q:  'owner:\"admin\" orgid:0123456789ABCDEF  ownerfolder:root -type:(\"Code Attachment\" OR \"Featured Items\") -typekeywords:(\"MapAreaPackage\") -type:(\"Map Area\")',\r\n    num: 20,\r\n    start: 1,\r\n    sortField: \"modified\",\r\n    sortOrder: \"desc\",\r\n    f:\"json\",\r\n    token:this.state.tokenmanager\r\n}\r\n    const params=qs.stringify(data);\r\n    Axios.post('https://p15v.arcgisonline.cn/portal/sharing/rest/search', params)\r\n        .then((res)=>{\r\n            const {results}=res.data\r\n        this.setState({results})\r\n            const {id}=this.state.results\r\n            console.log({id})\r\n\r\n\r\n          }\r\n        )\r\n}\r\n\r\n    render (){\r\n        return(\r\n            <div>\r\n                <button onClick={this.postitem}>获取项目</button>\r\n                <div>\r\n                    {\r\n                        /*利用.map遍历数组内的值*/\r\n                        this.state.results.map((resultsobj)=>{\r\n                            return(\r\n                                <div key={resultsobj.id}>\r\n                                   <a><img src={resultsobj.thumbnail}/></a>\r\n                                    <p>{resultsobj.title}</p>\r\n                        </div>\r\n                            )\r\n                        })\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}