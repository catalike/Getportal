{"ast":null,"code":"var _jsxFileName = \"D:\\\\untitled\\\\src\\\\component\\\\GetItem.js\";\nimport React, { Component } from \"react\";\nimport PubSub from \"pubsub-js\";\nimport Axios from \"axios\";\nimport qs from 'qs';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class GetItem extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      results: []\n    };\n\n    this.postitem = () => {\n      const data = {\n        q: 'owner:\"admin\" orgid:0123456789ABCDEF  ownerfolder:root',\n        countFields: \"access,contentstatus,categories\",\n        countSize: 200,\n        f: \"json\",\n        token: this.state.tokenmanager\n      };\n      const params = qs.stringify(data);\n      Axios.post('https://p15v.arcgisonline.cn/portal/sharing/rest/search', params).then(res => {\n        const {\n          results\n        } = res.data;\n        this.setState({\n          results\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    PubSub.subscribe('token', (msg, tokenmanager) => this.setState(tokenmanager)); //订阅Getinfo发布的token\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.postitem,\n        children: \"\\u83B7\\u53D6\\u9879\\u76EE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: this.state.results.map(resultsobj => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: resultsobj.thumbnail\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 40,\n                columnNumber: 39\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 40,\n              columnNumber: 36\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: resultsobj.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 41,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/untitled/src/component/GetItem.js"],"names":["React","Component","PubSub","Axios","qs","GetItem","state","results","postitem","data","q","countFields","countSize","f","token","tokenmanager","params","stringify","post","then","res","setState","componentDidMount","subscribe","msg","render","map","resultsobj","thumbnail","title"],"mappings":";AAAA,OAAOA,KAAP,IAAcC,SAAd,QAA6B,OAA7B;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,IAAf;;AAEA,eAAe,MAAMC,OAAN,SAAsBJ,SAAtB,CAA+B;AAAA;AAAA;AAAA,SAC3CK,KAD2C,GACrC;AACFC,MAAAA,OAAO,EAAC;AADN,KADqC;;AAAA,SAQ9CC,QAR8C,GAQrC,MAAI;AAEb,YAAMC,IAAI,GAAC;AACPC,QAAAA,CAAC,EAAG,wDADG;AAEPC,QAAAA,WAAW,EAAE,iCAFN;AAGPC,QAAAA,SAAS,EAAE,GAHJ;AAIPC,QAAAA,CAAC,EAAC,MAJK;AAKPC,QAAAA,KAAK,EAAC,KAAKR,KAAL,CAAWS;AALV,OAAX;AAOI,YAAMC,MAAM,GAACZ,EAAE,CAACa,SAAH,CAAaR,IAAb,CAAb;AACAN,MAAAA,KAAK,CAACe,IAAN,CAAW,yDAAX,EAAsEF,MAAtE,EACKG,IADL,CACWC,GAAD,IAAO;AACT,cAAM;AAACb,UAAAA;AAAD,YAAUa,GAAG,CAACX,IAApB;AACJ,aAAKY,QAAL,CAAc;AAACd,UAAAA;AAAD,SAAd;AACC,OAJL;AAKH,KAvB6C;AAAA;;AAI1Ce,EAAAA,iBAAiB,GAAG;AAChBpB,IAAAA,MAAM,CAACqB,SAAP,CAAiB,OAAjB,EAAyB,CAACC,GAAD,EAAKT,YAAL,KAAqB,KAAKM,QAAL,CAAcN,YAAd,CAA9C,EADgB,CAC0D;AAC7E;;AAmBDU,EAAAA,MAAM,GAAG;AACL,wBACI;AAAA,8BACI;AAAQ,QAAA,OAAO,EAAE,KAAKjB,QAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAA,kBAEQ,KAAKF,KAAL,CAAWC,OAAX,CAAmBmB,GAAnB,CAAwBC,UAAD,IAAc;AACjC,8BACI;AAAA,oCACG;AAAA,qCAAG;AAAK,gBAAA,GAAG,EAAEA,UAAU,CAACC;AAArB;AAAA;AAAA;AAAA;AAAA;AAAH;AAAA;AAAA;AAAA;AAAA,oBADH,eAEI;AAAA,wBAAID,UAAU,CAACE;AAAf;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ;AAMH,SAPD;AAFR;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAkBH;;AA5CyC","sourcesContent":["import React,{Component}from \"react\"\r\nimport PubSub from \"pubsub-js\";\r\nimport Axios from \"axios\";\r\nimport qs from 'qs'\r\n\r\nexport default class GetItem extends Component{\r\n   state={\r\n       results:[]\r\n   }\r\n    componentDidMount() {\r\n        PubSub.subscribe('token',(msg,tokenmanager)=> this.setState(tokenmanager))//订阅Getinfo发布的token\r\n    }\r\n\r\npostitem=()=>{\r\n\r\nconst data={\r\n    q:  'owner:\"admin\" orgid:0123456789ABCDEF  ownerfolder:root',\r\n    countFields: \"access,contentstatus,categories\",\r\n    countSize: 200,\r\n    f:\"json\",\r\n    token:this.state.tokenmanager\r\n}\r\n    const params=qs.stringify(data);\r\n    Axios.post('https://p15v.arcgisonline.cn/portal/sharing/rest/search', params)\r\n        .then((res)=>{\r\n            const {results}=res.data\r\n        this.setState({results})\r\n        })\r\n}\r\n\r\n    render (){\r\n        return(\r\n            <div>\r\n                <button onClick={this.postitem}>获取项目</button>\r\n                <div>\r\n                    {\r\n                        this.state.results.map((resultsobj)=>{\r\n                            return(\r\n                                <div>\r\n                                   <a><img src={resultsobj.thumbnail}/></a>\r\n                                    <p>{resultsobj.title}</p>\r\n                        </div>\r\n                            )\r\n                        })\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}